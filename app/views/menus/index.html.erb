<%= render 'shared/navbarnavy' %>
<% if Menu.find_by(:date => Date.current) == nil %>
  <div class="container">
    <div id="carouselContent" class="carousel slide" data-interval="false">
      <div class="carousel-inner" role="listbox">        
        <% @menus.order("date asc").each do |menu| %>
          <% if menu == @menus.order("date asc").first %>
            <div class="carousel-item active text-center p-4">
              <div class="title-color">
                <h1 class="menu-heading"><%= menu.date.strftime("%m/%d") %></h1>      
              </div>
              <h1 class="menu-title">Canapés</h1>
              <% menu.dishes.where(menu: menu).where(:dish_type => 'canape').each do |dish| %>
                <b class="dish-text"><%= dish.name %></b>
                <p class="dish-para"><i><%= dish.description %></i></p>
              <% end %>
              
              <h1 class="menu-title">Starter</h1>
              <% menu.dishes.where(menu: menu).where(:dish_type => 'starter').each do |dish| %>
                <b class="dish-text"><%= dish.name %></b>
                <p class="dish-para"><i><%= dish.description %></i></p>
              <% end %>
                            
              <h1 class="menu-title">Main</h1>
              <% menu.dishes.where(menu: menu).where(:dish_type => 'main').each do |dish| %>
                <b class="dish-text"><%= dish.name %></b>
                <p class="dish-para"><i><%= dish.description %></i></p>
              <% end %>

              <h1 class="menu-title">Dessert</h1>
              <% menu.dishes.where(menu: menu).where(:dish_type => 'dessert').each do |dish| %>
                <b class="dish-text"><%= dish.name %></b>
                <p class="dish-para"><i><%= dish.description %></i></p>
              <% end %>
            </div>
          <% else %>
            <div class="carousel-item text-center p-4">
              <div class="title-color">
                <h1 class="menu-heading"><%= menu.date.strftime("%m/%d") %></h1>
              </div>
              <h1 class="menu-title">Canapés</h1>
              <% menu.dishes.where(menu: menu).where(:dish_type => 'canape').each do |dish| %>
                <b class="dish-text"><%= dish.name %></b>
                <p class="dish-para"><i><%= dish.description %></i></p>
              <% end %>

              <h1 class="menu-title">Starter</h1>
              <% menu.dishes.where(menu: menu).where(:dish_type => 'starter').each do |dish| %>
                <b class="dish-text"><%= dish.name %></b>
                <p class="dish-para"><i><%= dish.description %></i></p>
              <% end %>
                      
              <h1 class="menu-title">Main</h1>
              <% menu.dishes.where(menu: menu).where(:dish_type => 'main').each do |dish| %>
                <b class="dish-text"><%= dish.name %></b>
                <p class="dish-para"><i><%= dish.description %></i></p>
              <% end %>

              <h1 class="menu-title">Dessert</h1>
              <% menu.dishes.where(menu: menu).where(:dish_type => 'dessert').each do |dish| %>
                <b class="dish-text"><%= dish.name %></b>
                <p class="dish-para"><i><%= dish.description %></i></p>
              <% end %>
              </div>
          <% end %>
        <% end %>
      </div>
      <a class="carousel-control-prev" href="#carouselContent" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselContent" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true" ></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  </div>
</div>
<% else %>
    <div class="container">
        <div id="carouselContent" class="carousel slide" data-interval="false">
            <div class="carousel-inner" role="listbox">
                <% @menus.order("date asc").each do |menu| %>
                    <% if menu.date == Date.current %>
                        <div class="carousel-item active text-center p-4">
                          <div class="title-color">
                            <h1 class="menu-heading"><%= "Today's menu Aboard #{current_user.booking.yatch.yatch_name}" %></h1>
                          </div>
                          <h1 class="menu-title">Canapés</h1>
                          <% menu.dishes.where(menu: menu).where(:dish_type => 'canape').each do |dish| %>
                              <b class="dish-text"><%= dish.name %></b>
                              <p class="dish-para"><i><%= dish.description %></i></p>
                          <% end %>

                          <h1 class="menu-title">Starter</h1>
                          <% menu.dishes.where(menu: menu).where(:dish_type => 'starter').each do |dish| %>
                              <b class="dish-text"><%= dish.name %></b>
                              <p class="dish-para"><i><%= dish.description %></i></p>
                          <% end %>
                          
                          <h1 class="menu-title">Main</h1>
                          <% menu.dishes.where(menu: menu).where(:dish_type => 'main').each do |dish| %>
                              <b class="dish-text"><%= dish.name %></b>
                              <p class="dish-para"><i><%= dish.description %></i></p>
                          <% end %>
                          <h1 class="menu-title">Dessert</h1>
                          <% menu.dishes.where(menu: menu).where(:dish_type => 'dessert').each do |dish| %>
                              <b class="dish-text"><%= dish.name %></b>
                              <p class="dish-para"><i><%= dish.description %></i></p>
                          <% end %>
                        </div>
                    <% else %>
                        <div class="carousel-item text-center p-4">
                            <h1 class="menu-heading"><%= menu.date.strftime("%m/%d") %></h1>

                            <h1 class="menu-title">Canapés</h1>
                            <% menu.dishes.where(menu: menu).where(:dish_type => 'canape').each do |dish| %>
                                <b class="dish-text"><%= dish.name %></b>
                                <p class="dish-para"><i><%= dish.description %></i></p>
                            <% end %>

                            <h1 class="menu-title">Starter</h1>
                            <% menu.dishes.where(menu: menu).where(:dish_type => 'starter').each do |dish| %>
                                <b class="dish-text"><%= dish.name %></b>
                                <p class="dish-para"><i><%= dish.description %></i></p>
                            <% end %>
                            
                            <h1 class="menu-title">Main</h1>
                            <% menu.dishes.where(menu: menu).where(:dish_type => 'main').each do |dish| %>
                                <b class="dish-text"><%= dish.name %></b>
                                <p class="dish-para"><i><%= dish.description %></i></p>
                            <% end %>

                            <h1 class="menu-title">Dessert</h1>
                            <% menu.dishes.where(menu: menu).where(:dish_type => 'dessert').each do |dish| %>
                                <b class="dish-text"><%= dish.name %></b>
                                <p class="dish-para"><i><%= dish.description %></i></p>
                            <% end %>
                        </div>
                    <% end %>
                <% end %>
            </div>
            <a class="carousel-control-prev" href="#carouselContent" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselContent" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
            </div>
        </div>
    </div>
<% end %>